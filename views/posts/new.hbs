<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
    
    <div class="timeline-navbar">
      <i id="dark-mode-toggle" class="fas fa-moon toggle-button"></i>
  <div class="topbar">
    <div class="icon large-icon">{{icon}}</div>
    <h1 class="title">Acebook</h1>
    <form action='/sessions?_method=DELETE' method='POST'>
      <input type="submit" value="Log Out" class="global-button logout">
    </form>
  </div>
  <div class="bottombar">
    <a href="/posts">Back to Posts</a>
  </div>
</div>

<div class="new-content">
  <div class="new-post-box">
    <h1 class="create-title">Create your Post</h1>
    {{#if error }}
      <div class="error-message">
      {{error}}
      </div>
    {{/if}}
    <form action="/posts/gif" method="post" class="gif-finder">
      <div>
        <input type="text" name="searchQuery" placeholder="Search GIFs" class="input-box">
        <input type="submit" value="Search" class="global-button">
      </div>
    </form>
    <form id="new-post-form" action="/posts" method="post">
      <div class="gif-results">
        {{#if gifs}}
          <ul class="gif-list">
            {{#each gifs}}
            <li>
              <label class="gif">
                <input type="radio" name="gifUrl" value="{{this.images.original.url}}">
                <img src="{{this.images.original.url}}" alt="{{this.title}}" class="gif-thumbnail">
              </label> 
            </li>
          {{/each}}
          </ul>
        {{else}}
          <p class="no-gif-line">No GIFs found.</p>
        {{/if}}
      </div>
        <textarea id="message" class="input-area" type="text" name="message" value="" rows="6" placeholder="Say something..." maxlength="500" required></textarea>
        <input type="submit" value="Submit" class="global-button">
    </form>
  </div>
</div>

</body>

<script>
// Get the dark mode toggle button element
const darkModeToggle = document.getElementById('dark-mode-toggle');

// Check if the user's preference is stored in localStorage
const isDarkMode = localStorage.getItem('darkMode') === 'true';

// Set the initial state of dark mode based on the user's preference
if (isDarkMode) {
  document.body.classList.add('dark-mode');
  darkModeToggle.classList.add('fa-sun');
} else {
  document.body.classList.remove('dark-mode');
  darkModeToggle.classList.add('fa-moon');
}

// Toggle dark mode when the button is clicked
darkModeToggle.addEventListener('click', () => {
  // Toggle the dark mode class on the body element
  document.body.classList.toggle('dark-mode');
  darkModeToggle.classList.toggle('fa-sun');
  darkModeToggle.classList.toggle('fa-moon');

  // Update the button text and store the dark mode preference
  if (document.body.classList.contains('dark-mode')) {
    localStorage.setItem('darkMode', 'true');
  } else {
    localStorage.setItem('darkMode', 'false');
  }
});

</script> 